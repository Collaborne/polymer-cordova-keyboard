<link rel="import" href="../polymer/polymer.html">

<!--
Web component to control keyboard via Cordova plugin.

### Example
```html
<polymer-cordova-keyboard hide-keyboard-accessory-bar></polymer-cordova-keyboard>
```

-->
<dom-module id='polymer-cordova-keyboard'>
</dom-module>

<script>

(function() {

	Polymer({
		is: 'polymer-cordova-keyboard',
		properties: {
			/**
			 * True if the keyboard accessory bar should be shown
			 */
			hideKeyboardAccessoryBar: {
				type: Boolean,
				notify: false,
				observer: '_changeHideKeyboardAccessoryBar'
			}
		},
		
		ready: function() {
			// Avoid race condition if Polymer is initialized before Cordova
			document.addEventListener("deviceready", function() {
				this._setHideKeyboardAccessoryBar(this.hideKeyboardAccessoryBar);
			}.bind(this), false);
		},
		
		// Public methods
		/**
		 * Shows the keyboard accessory bar
		 */
		show: function() {
			this.hideKeyboardAccessoryBar = false;
		},
		
		/**
		 * Hides the keyboard accessory bar
		 */
		hide: function() {
			this.hideKeyboardAccessoryBar = true;
		},
		
		// Private methods
		_changeHideKeyboardAccessoryBar: function(newValue, oldValue) {
			this._setHideKeyboardAccessoryBar(newValue);
		},
		_setHideKeyboardAccessoryBar: function(value) {
			if (typeof cordova == 'undefined' || typeof cordova.plugins == 'undefined' || typeof cordova.plugins.Keyboard == 'undefined') {
				// Ignore if cordova plugin is not available
				return;
			}

			cordova.plugins.Keyboard.hideKeyboardAccessoryBar(value);
		}
	});

})();

</script>
